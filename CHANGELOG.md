# Changelog

All notable changes to this project will be documented in this file.

## 0.7.4 - 2025-10-18

**NOTE**: the feature `all` has been renamed to `_test` and `internals` to `_internals`.
This is _not_ treated as a breaking change, because both features were always intended as an internal features.
The leading underscore now properly marks the features as internal.

### Features

- `AsRef<Cl>` for `[Lit; N]`, `Vec`, and `Cl` ([#499](https://github.com/chrjabs/rustsat/pull/499)) ([6a4fe5b](6a4fe5ba9d2d3357d32d5e0224d0ca3f62f412f1))

### Bug Fixes

- Deadlock in external solver ([6b2f0bf](6b2f0bf1a6c8ceb1bcd3dd579f3744947560c9d2))
- Abstract timer and use `std::time::Instant` in `wasm` ([aadef69](aadef69472923d57e99a541c64376dbccaf3a855)), fixes #455
- Change timers from process time to thread time ([57261f5](57261f5c4993ad3bb1e38986ca9c238ed7a328d0))
- Use `web-time` for timing measurement on `wasm` (#467) ([50d67f2](50d67f2d3c93bd3ee906104b5f0eb353fb0b4665))
- Various dependency updates
- Changelogs for C and Python API ([8b66ace](8b66ace4d9aee334c5561f36b666e0a01201d9f0))
- Auto cfg in documentation (#497) ([c6623bf](c6623bf230c4e21218dd374ada9d8dada45cf0e2))

### Documentation

- Add note to make external solver non-verbose ([cb088b0](cb088b092ee66f6086175c0e3f1cfd01679f5851))

### Miscellaneous Tasks

- Fix labeler permissions ([25fc271](25fc271dcc0caa70d8cbabb44891e453bf0d148d))
- Make paths relative to cargo manifest ([87d6f2e](87d6f2e80ee6c757f57a31864f7e9aa1a325c2ab))
- Add newlines at end of templates ([1f931e6](1f931e61c21abd7f979c84b19df4feba71dc11d1))
- Add --check option ([f67835e](f67835ea3dc6ee6468c92e9b090a09d020732926))
- Switch CI to nix ([7c73dcf](7c73dcfdb7358ed64a1b70442daeb92a6fa39621))
- Skip mosts checks on draft PRs (#454) ([323116d](323116deedb6a30e93a6abae62687362540bfd45))
- Check wasm compatibility ([27f1000](27f10001b4f54e27a66382adfde21be5a17b7d2c))
- Update to pyo3 0.26.0 ([3167083](3167083835cd27593339989345429876146c9231))
- Update dev env and `release-plz` trusted publishing (#479) ([88ac9af](88ac9af539460231238c903dc7b7cfe1285c5048))
- Update dev env and dev rust version ([fb2070d](fb2070dc089876986ac11bd2791881527673fa86))
- Clippy ([844a209](844a2097c9eea05375d32f0c178f83cf3ac8d633))
- Include keep-sorted formatter ([46e505c](46e505cca3e50b7743c47288b2fb2610da3f1952))
- Add cargo-deny ([80ac88b](80ac88b7f9b3306c5b80218d1799319dc03c6117))
- Use new veripb ([006ddde](006ddde3d8bdb73ba5df79a4435607ee9a666a5a))
- Generate changelogs for C and Python API (#490) ([88aa787](88aa7878c95e82c0bc117491449b5a9ba620622b))
- Ignore commit hash links in typo checking (#493) ([04cf19b](04cf19bae3bdfdedecfa86798c746b4567dc6c51))

<!-- generated by git-cliff -->

## 0.7.3 - 2025-08-07

### Bug Fixes

- Incorrect parsing of DIMACS WCNF files with duplicate soft clauses ([#409](https://github.com/chrjabs/rustsat/pull/409)) ([34c73df](34c73df8fc960cd809d597a3c74cc064c4ea7331))
- Handle null pointers in empty ranges from solvers ([#418](https://github.com/chrjabs/rustsat/pull/418)) ([1a3f8f4](1a3f8f4ba8b2ae125b018a051906b018ab370697))
- `Totdb` only reserve variables the connection needs ([#435](https://github.com/chrjabs/rustsat/pull/435)) ([8f0f2f3](8f0f2f3d156d45456ef5a443e136224f24211485)), fixes #165

### Documentation

- Reference and architecture diagram ([#410](https://github.com/chrjabs/rustsat/pull/410)) ([ef9aab2](ef9aab2f0c5fc35c288e59f35619706c331cab2b))
- Fix reference doi and pages ([#442](https://github.com/chrjabs/rustsat/pull/442)) ([3a352f9](3a352f9869781c6848aaccbc1736fbfd33f06117))

### Features

- Incremental solver simulator ([43746cf](43746cf8d1decf7810d74df7189f584f859cc7eb)), fixes #15

### Miscellaneous Tasks

- Clippy ([d959a33](d959a3366380a48b9ca00a4ede6b386f26f8dd25))
- Update patch updates ([#412](https://github.com/chrjabs/rustsat/pull/412)) ([9a9621d](9a9621ddde4d9d7c235f1dfcb98ac06e977a315d)), Co-authored-by:renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>
- Update rust crate syn to v2.0.104 ([#413](https://github.com/chrjabs/rustsat/pull/413)) ([b61bd30](b61bd3037f275a0e71f0912a5312f13fea55662a)), Co-authored-by:renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>
- Update rust crate minijinja to 2.11.0 ([#417](https://github.com/chrjabs/rustsat/pull/417)) ([435c787](435c7879921aa7ea51d4943e11b09db9ff460613)), Co-authored-by:renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>

<!-- generated by git-cliff -->
## [0.7.2] - 2025-05-30

### Bug Fixes

- Always cache node values in `ValueIter` (#374)

### Documentation

- Citation instructions (#394)

### Features

- `IntoIterator` for `&Assignment` (#397)

### Miscellaneous Tasks

- Nightly development toolchain (#372)
- Format `Cargo.toml` (#386)
- Update PyO3 (#393)

<!-- generated by git-cliff -->
## [0.7.1] - 2025-05-01

### Bug Fixes

- GTE bug with limited connections (#357)
- Safe deserialization for `Var`

### Documentation

- Update badges and docs link (#366)

### Miscellaneous Tasks

- Update patch updates (#349)
- Update patch updates (#361)
- Update patch updates (#363)
- Update rust crate syn to v2.0.101 (#364)
- Codegen tool for generating bindings
- Migrate to mainly self-hosted runners
- Update rust version
- Slightly clean up dependencies

### Testing

- C-API tests with custom harness

<!-- generated by git-cliff -->
## [0.7.0] - 2025-04-03

All `rustsat-` crates now follow the version number of the main crate.

### Bug Fixes

- `ReindexingVarManager` map with identity with initialized with next free

### Documentation

- Copy past typos in encoding traits
- Document crates and features
- Update shield style

### Features

- Add `Debug` implementations for everything
- `pigeons` VeriPB library
- Implement `pigeons` traits for types
- [**breaking**] More functionality on constraint types
- Reified cardinality/PB encodings in `atomics`
- `Initialize` trait
- `len` and `is_empty` for `Assignment`
- Certified encoding traits
- Implement certified encoding traits for simulators
- Certified `Totalizer` and `GeneralizedTotalizer`
- Default certified constraint encoders
- Lower bounding traits for referencing DB totalizers
- Lower bounding totalizers
- [**breaking**] `Monotone` trait for encodings

### Miscellaneous Tasks

- Code spell-checking
- Bump MSRV to `1.75.0`
- Remove all elements deprecated in 0.6.0 and before

### Performance

- [**breaking**] Remove blanket implementations for both bounding encodings

### Refactor

- [**breaking**] Move totalizer database to separate module
- [**breaking**] Don't use `anyhow` in encoding API
- [**breaking**] Remove non-db totalizer encodings

### Testing

- Lower-bounding tests for `DbTotalizer`

<!-- generated by git-cliff -->
## [0.6.6] - 2025-03-27

### Bug Fixes

- Two bugs in `BinaryAdder`
- Don't attempt scraping examples that rely on cyclic dependencies

### Features

- Optimize `DbGte` building code

### Miscellaneous Tasks

- Fix warnings in benches

### Testing

- Extend pb-enc benchmarks

<!-- generated by git-cliff -->
## [0.6.5] - 2025-03-25

### Features

- SIS MaxSAT algorithm
- Add examples from `rustsat-tools`
- Main branch documentation available [here](https://christophjabs.info/rustsat/main/rustsat)
- Expose literal parsing functions as internals

### Bug Fixes

- Use var count from DIMACS header as minimum

### Documentation

- Document MSRV policy

### Testing

- Basic tests for am1 encodings

### Miscellaneous Tasks

- Cargo fmt
- Cargo clippy
- Update rust crate syn to v2.0.100 (#298)
- Update patch updates (#288)
- Update patch updates (#291)
- Update patch updates (#304)
- Update PyO3 to 0.24.0
- Force synced versions via workspace
- Bump MSRV to 1.74.0
- Temporarily disable semver-checks lint
- Remove deprecated CI badges

<!-- generated by git-cliff -->
## [0.6.4] - 2025-02-18

### Features

- Optional serde support behind `serde` feature

### Bug Fixes

- Dpw reserve don't build unnecessary structure

### Dependencies

- Update patch updates (#219)
- Update rust crate quote to v1.0.38 (#222)
- Update patch updates (#241)
- Update rust crate syn to v2.0.98 (#259)

<!-- generated by git-cliff -->
## [0.6.3] - 2024-12-20

### Miscellaneous Tasks

- Exclude unnecessary files from release

<!-- generated by git-cliff -->
## [0.6.2] - 2024-12-13

### Features

- Check variable addition overflow in debug
- `Var` and `Lit` constructors in `const` context
- Implement `kani::Arbitrary` for `TernaryVal`
- `BinaryAdder` PB encoding
- Initialize encodings when calling `reserve`
- Include rustsat version in header
- Include C sources for newest version

### Bug Fixes

- Unnecessary `mut` warning in `clause![]`

### Documentation

- Spelling

### Testing

- Switch to nextest for running tests

### Miscellaneous Tasks

- Bump a bunch of dependencies
- Cleanup file endings and trailing whitespace
- Set up pre-commit hooks
- Group dependabot PRs
- Clippy
- Do not run nextest if no tests

<!-- generated by git-cliff -->
## [0.6.1] - 2024-10-16

### Documentation

- Fix docsrs build

<!-- generated by git-cliff -->
## [0.6.0] - 2024-10-16

### Features

- External solver interface
- Batsat solver interface
- Generalize batsat interface
- `lit` method for `Var`
- Implement `Default` for `TernaryVal`
- `iter` method for `Assignment`
- `is_sat` for `Cnf` and `Assignment` ergonomics
- `Propagate` trait
- `Cl` as light-weight DST for clauses
- [**breaking**] Add `evaluate`, replacing `is_sat`
- Add generalized totalizer to capi
- `Cnf::clear`
- Ladder at-most-one encoding
- Bitwise at-most-one encoding
- Commander at-most-one encoding
- Bimander at-most-one encoding

### Documentation

- Fix ambiguous links
- Mark `internals` properly
- Fix typos

### Miscellaneous Tasks

- Move main crate to project root
- Pedantic clippy
- [**breaking**] Breaking clippy suggestions
- [**breaking**] Rename constraint types
- Update dependencies
- Run clippy nightly on prs
- Update dependencies
- Clippy with most-recent nightly
- Set up nix dev shell and tools package

### Refactor

- [**breaking**] Make reading functions take reader by reference
- Use bindgen to generate solver bindings

### Testing

- Paths relative to manifest
- Basic kani harnesses for `Var` and `Lit`

### Api

- [**breaking**] Mark unchecked functions as unsafe

<!-- generated by git-cliff -->
## [0.5.1] - 2024-06-12

### Features

- Incremental precision in DPW
- Format vars and lits nicely with debug

### Bug Fixes

- Make `Node` type (of `dbtotalizer`) opaque. This is technically a breaking
  change, but since the `Node` type was never intended to be transparent, we are
  _not_ treating it as one. If you are relying on having access to the `Node`
  type, use the feature `internal` instead, but note that the internal API is
  unstable.

### Testing

- Fix warnings

<!-- generated by git-cliff -->
## [0.5.0] - 2024-04-30

This release contains breaking changes. For detailed instructions on how to
handle migration, please refer to the [migration
guide](https://github.com/chrjabs/rustsat/blob/main/docs/0-5-0-migration-guide.md).

### Bug Fixes

- Incorrect coarse_ub in dpw when unweighted
- Dynamic polynomial watchdog edge cases with < 2 inputs

### Documentation

- Clarify lit rep and relation to IPASIR/DIMACS
- Add missing documentation
- Fix broken links

### Features

- Migrate error handling to `anyhow` create
- Move IPASIR bindings to separate crate
- Instance ergonomics for member variables
- Ergonomics for opb writing
- Ergonomics for dimacs writing
- Add `add_clause_ref` method to `Solve` trait
- Add `add_nary` function
- Have file parsers take `BufRead` types
- `Extend<&Clause>` for solvers
- Catch memory out in solvers
- Catch memory outs in clause collector
- Parse external solver output
- `ipasir-display` feature

### Miscellaneous Tasks

- Update to `pyo3` 0.21
- Specify minimum rust version

### Performance

- Add `BufWriter` when writing to file
- Avoid unnecessary cloning

### Refactor

- Clean up control flow in solver methods
- Clean up control flow in dimacs parsing
- Factor out C-API
- Factor out Python API

<!-- generated by git-cliff -->
## [0.4.3] - 2024-02-22

### Features

- Internal `from_raw` methods for db totalizers
- Thorough merge strategy for `NodeById`
- Make opb defaults more like pbo competition specs
- Output opbs with `#variable` line

### Bug Fixes

- Remove `weight_sum` field from `DbGte`

### Documentation

- Disable cbindgen on docs.rs

<!-- generated by git-cliff -->
<!-- generated by git-cliff -->
## [0.4.2] - 2024-01-11

### Documentation

- Mark required features in documentation on [docs.rs](https://docs.rs/rustsat)

## [0.4.1] - 2024-01-11

### Documentation

- Improve doc examples
- Add shields to READMEs

### Features

- Helpful shortcuts in instances and solver
- Index assignments by var and negate ternary vals

<!-- generated by git-cliff -->
## [0.4.0] - 2023-12-18

### Bug Fixes

- Set var manager in SatInstance::from_iter
- Set vm correctly in SatInstance::from(Cnf)
- Coarse convergence bounds
- Link capi tests to archive libs
- Typo in capi
- Parse empty instances correctly
- Limited connections in node db
- Next value in db-referencing gtes

### Documentation

- (limited) python api documentation

### Features

- Python api expose lit, clause, cnf
- Python len and indexing support for clause and cnf
- Feature switch for python api
- Python iterators
- Totalizer and comparison operators in pyapi
- Expose all encodings in python api
- Extend internal node api
- Limited connections in node db
- Constant method for objective
- Allow cloning totalizer db

## [0.3.0]

### Refactor

- Allow encodings to output straight to solvers

### Features

- Alternative totalizer implementation based on a totalizer database
- Dynamic polynomial watchdog encoing
- Changes to public API: changed some vectors to slices
- Changed internal variable/literal representation from `usize` to `u32`

## [0.2.x]

Solver interfaces factored out into separate crates.
See detailed changes in [GitHub Releases](https://github.com/chrjabs/rustsat/releases).

## [0.1.2]

Updated initial version with working dependencies.

## [0.1.0] and [0.1.1]

Yanked because of dependencies that don't exist anymore
